### Лабораторная работа №2. Ручное построение нисходящих синтаксических анализаторов

### Вариант 11. Описание массивов в Kotlin

<<<<<<< HEAD
Рассматривается задача создания описания для массивов в Kotlin, начиная с ключевого слова `var`, за которым следует имя массива, двоеточие, название типа `Array`, и тип элементов массива, заключенных в угловые скобки. Пример: `var x: Array<Int>;`.

=======
Массив в Kotlin. Описание начинается ключевым словом “var”, далее
идет имя массива, двоеточие, имя типа “Array”, далее в угловых скобках
имя типа элементов массива.
Используйте один терминал для всех имен переменных и имен типов.
Используйте один терминал для ключевого слова var (не несколько ‘v’,
‘a’, ‘r’).
Пример: var x: Array<Int>;
>>>>>>> bab2887 (moda)
## Токенизация

Процесс разбиения входной строки на токены будет осуществляться с помощью функции `tokenize`. Если строка состоит из корректных токенов, разбиение завершится успешно. В случае встречи неизвестного токена будет выброшено исключение.

| Токен        | Терминал    |
|--------------|-------------|
| `VAR`        | `var`       |
| `IDENTIFIER` | `name/type` |
| `COLON`      | `:`         |
| `ARRAY`      | `Array`     |
| `LT`         | `<`         |
| `GT`         | `>`         |
| `SEMICOLON`  | `;`         |
| `END`        | `$`         |

## Построение грамматики и анализатора

Грамматика для описания массивов в Kotlin будет выглядеть следующим образом:

| P (вывод)                                       | Описание                                             |
|-------------------------------------------------|------------------------------------------------------|
| `S -> 'var' IDENTIFIER ':' ArrayType OptionalSemicolon` | Описание массива с необязательным символом `;`      |
| `ArrayType -> 'Array' '<' Type '>'`             | Описание типа массива, включая параметры типа       |
| `Type -> IDENTIFIER`                            | Тип данных, представленный идентификатором          |
| `Type -> ArrayType`                             | Рекурсивное определение типа для вложенных массивов |
| `OptionalSemicolon -> ';'`                      | Необязательный символ `;`                           |
| `OptionalSemicolon -> ε`                        | Пустая строка, представляющая отсутствие символа    |

Грамматика не содержит левой рекурсии и правого ветвления, что делает ее подходящей для создания LL(1) синтаксического анализатора. Это означает, что для каждого нетерминала можно однозначно определить, какое правило вывода использовать, основываясь только на текущем входном символе (токене).

## Множества FIRST и FOLLOW

| Нетерминал        | FIRST                 | FOLLOW               |
|-------------------|-----------------------|----------------------|
| `S`               | `var`                 | `$`, `;`             |
| `ArrayType`       | `Array`               | `;`, `>`, `$`        |
| `Type`            | `IDENTIFIER`, `Array` | `>`, `;`, `$`        |
| `OptionalSemicolon`| `;`, ε               | `$`                  |

## Визуализация дерева разбора

Для визуализации дерева разбора используется система GraphViz. Парсер модифицирован для построения дерева разбора в процессе анализа входной строки. После парсинга дерево визуализируется в виде графа.

## Тестирование

Разработанный анализатор покрывается тестами, включающими как валидные, так и невалидные входные данные. Тесты направлены на проверку корректности работы анализатора в различных сценариях использования.

### Валидные тесты:
- `var a: Array<Int>;`
- `var b: Array<String>`

### Невалидные тесты:
- `x: Array<Int>;`
- `var i: Array<>;`

Тестирование подтверждает способность анализатора корректно обрабатывать заданные входные данные согласно разработанной грамматике, а также выявлять синтаксические ошибки в некорректных входных строках.
<<<<<<< HEAD
=======

### Модификация

| P (вывод)                               | Описание                                    |
|-----------------------------------------|---------------------------------------------|
| `S -> 'var' IDENTIFIER ':' ArrayType OptionalSemicolon` | Описание массива с необязательным `;` |
| `ArrayType -> 'Array' '<' TypeList '>'` | Описание типа массива, включая параметры типа |
| `TypeList -> Type TypeTail`             | Список типов, возможно с конкатенацией     |
| `TypeTail -> Ampersand Type TypeTail`   | Продолжение списка типов с конкатенацией   |
| `TypeTail -> ε`                         | Завершение списка типов                    |
| `Type -> IDENTIFIER`                    | Тип данных идентификатор      |
| `Type -> ArrayType`                     | Рекурсивное определение типа для вложенных массивов |
| `Ampersand -> '&'`                      | Символ конкатенации типов                  |
| `OptionalSemicolon -> ';'`              | Необязательный символ `;`                  |
| `OptionalSemicolon -> ε`                | Пустая строка    |
>>>>>>> bab2887 (moda)
